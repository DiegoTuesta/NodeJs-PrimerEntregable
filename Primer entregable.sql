CREATE DATABASE courses_web;
\c courses_web
CREATE TABLE "roles" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(15)
);

CREATE TABLE "categories" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(30)
);

CREATE TABLE "levels" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(15)
);

CREATE TABLE "users" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(70),
  "email" varchar(100),
  "password" varchar(25),
  "age" int,
  "role_id" int
);

CREATE TABLE "courses" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar(70),
  "description" varchar(255),
  "level_id" int,
  "user_id" int,
  "category_id" int
);

CREATE TABLE "course_video" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "course_id" int,
  "title" varchar(70),
  "url" varchar(100)
);

CREATE TABLE "registered_users" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "course_video_id" int,
  "user_id" int
);

ALTER TABLE "courses" ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id");

ALTER TABLE "courses" ADD FOREIGN KEY ("level_id") REFERENCES "levels" ("id");

ALTER TABLE "courses" ADD FOREIGN KEY ("category_id") REFERENCES "categories" ("id");

ALTER TABLE "users" ADD FOREIGN KEY ("role_id") REFERENCES "roles" ("id");

ALTER TABLE "course_video" ADD FOREIGN KEY ("course_id") REFERENCES "courses" ("id");

ALTER TABLE "registered_users" ADD FOREIGN KEY ("course_video_id") REFERENCES "course_video" ("id");

ALTER TABLE "registered_users" ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id");

INSERT INTO categories (name)  VALUES('Database'), ('FrontEnd'),('BackEnd');
INSERT INTO roles (name)  VALUES('Student'), ('Teacher'),('Admin');
INSERT INTO levels (name)  VALUES('Beginners'), ('Intermediate '),('Advanced');
-- CREATE TABLE "users" (
--   "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
--   "name" varchar(70),
--   "email" varchar(100),
--   "password" varchar(10),
--   "age" int,
--   "role_id" int
-- );
INSERT INTO users (name, email, password, age, role_id)
VALUES('Diego Tuesta', 'diego@gmail.com','diego123',24,1),
('Jhoel Torres', 'jhoelt@gmail.com','123@@.',30,2),
('Pepe Rodriguez', 'pr@gmail.com','1234@@',28,3),
('Mario Carvajal', 'mario12@gmail.com','Mario123',35,1),
('Esperanza Gomez', 'espegomez@gmail.com','espegomez123.',30,2),
('Pepe Lucho', 'luchopepe@gmail.com','Admin@.',30,3),
('Luis Alvarado', 'luis@gmail.com','luis123',24,1),
('Maria Gutierrez', 'mariag@gmail.com','M4ria123',20,1);

-- CREATE TABLE "courses" (
--   "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
--   "title" varchar(70),
--   "descripcion" varchar(255),
--   "level_id" int,
--   "user_id" int,
--   "category_id" int
-- );

-- CREATE TABLE "course_video" (
--   "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
--   "course_id" int,
--   "title" varchar(70),
--   "url" varchar(100)
-- );

INSERT INTO courses(title, description, level_id, user_id,category_id) 
VALUES('Introduccion a PostgreSQL', 'Curso de fundamentos de base de datos y primeros pasos en PostgreSQL',1,5,1),
('PostgreSQL Profesional', 'Curso donde se mostrara tecnicas de optimizacion y rendimiento para tu base de datos y mucho mas',2,5,1),
('PostgreSQL Nivel Experto', 'Curso para aprender utilizar en la nube',3,2,1);

INSERT INTO course_video(course_id, title, url) 
VALUES(1,'Introduccion a PostgreSQL','http:://thebest.com/introduccion-prostgresql'),
(2,'PostgreSQL Profesional','http:://thebest.com/prostgresql-profesional'),
(3,'PostgreSQL Nivel Experto','http:://thebest.com/prostgresql-expert');

-- CREATE TABLE "registered_users" (
--   "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
--   "course_video_id" int,
--   "user_id" int
-- );

INSERT INTO registered_users(course_video_id,user_id) 
VALUES(3,1),
(3,4),
(3,2),
(2,7),
(2,5),
(2,1),
(1,8),
(1,5),
(1,1);